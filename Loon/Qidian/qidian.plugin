#!name=起点读书
#!desc=自动观看起点读书广告，支持自定义任务执行
#!icon=https://raw.githubusercontent.com/chxm1023/Script_X/main/icon/qidian.png
#!author=Gin8527
#!homepage=https://github.com/Gin8527/Script/tree/main/Loon/Qidian
#!tag=阅读,签到

[Argument]
enableCookie = switch,true,tag=Cookie获取,desc=开启后可获取广告Cookie信息
enableTaskId = switch,true,tag=TaskId获取,desc=开启后可获取任务ID信息
enableAutoTask = switch,true,tag=自动执行任务,desc=开启后将按计划自动执行广告观看任务
taskInterval = input,"20",tag=任务间隔(秒),desc=任务之间的执行间隔，默认20秒

[Script]
http-request ^https?:\/\/h5\.if\.qidian\.com\/argus\/api\/v1\/video\/adv\/finishWatch script-path=https://raw.githubusercontent.com/Gin8527/Script/refs/heads/main/Loon/Qidian/qidian.cookie.js, requires-body=true, timeout=60, tag=起点读书Cookie, img-url=https://raw.githubusercontent.com/chxm1023/Script_X/main/icon/qidian.png, enable={enableCookie}

http-response ^https?:\/\/h5\.if\.qidian\.com\/argus\/api\/v(1|2)\/video\/adv\/mainPage script-path=https://raw.githubusercontent.com/Gin8527/Script/refs/heads/main/Loon/Qidian/qidian.taskId.js, requires-body=true, timeout=60, tag=起点读书TaskId, img-url=https://raw.githubusercontent.com/chxm1023/Script_X/main/icon/qidian.png, enable={enableTaskId}

cron "0 13 * * *" script-path=https://raw.githubusercontent.com/Gin8527/Script/refs/heads/main/Loon/Qidian/qidian.js, timeout=120, tag=起点读书自动看广告, img-url=https://raw.githubusercontent.com/chxm1023/Script_X/main/icon/qidian.png, enable={enableAutoTask}, argument=[{taskInterval}]

[MITM]
hostname = h5.if.qidian.com
